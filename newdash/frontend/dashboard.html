<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPFBL Dashboard - Painel Administrativo</title>
    <link rel="stylesheet" href="dashboard.css?v=notify-fix">
    <script src="version.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Sistema de Notifica√ß√µes -->
    <div id="notification-container" class="notification-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 10000;"></div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-toggle" onclick="toggleSidebar()" title="Compactar/Expandir">
                ‚óÄ
            </div>
            <div class="logo">
                <img src="/logo.png" alt="Logo SPFBL" style="max-width:200px;max-height:50px;width:auto;height:auto;">
            </div>
            <nav class="nav">
                <a href="#dashboard" class="nav-item active" onclick="showSection('dashboard', event)" data-label="Dashboard">
                    <span class="icon">üìä</span>
                    Dashboard
                </a>
                <a href="#queries" class="nav-item" onclick="showSection('queries', event)" data-label="Consultas">
                    <span class="icon">üìß</span>
                    Consultas
                </a>
                <a href="#servers" class="nav-item" onclick="showSection('servers', event)" data-label="Servidores">
                    <span class="icon">üñ•Ô∏è</span>
                    Servidores
                </a>
                <a href="#users" class="nav-item" onclick="showSection('users', event)" data-label="Usu√°rios">
                    <span class="icon">üë•</span>
                    Usu√°rios
                </a>
                <a href="#lists" class="nav-item" onclick="showSection('lists', event)" data-label="Listas (Block/White)">
                    <span class="icon">üìã</span>
                    Listas (Block/White)
                </a>
                <a href="#addon" class="nav-item is-hidden" id="nav-addon" onclick="showSection('addon', event)" data-label="Addon">
                    <span class="icon">üß©</span>
                    Addon
                </a>
                <a href="/settings" class="nav-item" data-label="Configura√ß√µes">
                    <span class="icon">‚öôÔ∏è</span>
                    Configura√ß√µes
                </a>
                <a href="#logs" class="nav-item" onclick="showSection('logs', event)" data-label="Logs">
                    <span class="icon">üìú</span>
                    Logs
                </a>
              </nav>
            <div class="sidebar-footer">
                <p class="dashboard-version" data-dashboard-version>v0.00</p>
                <p class="uptime" id="uptime">Carregando...</p>
                <p class="powered-by"><a href="https://github.com/leonamp/SPFBL" target="_blank" title="Powered by SPFBL">Powered by SPFBL</a></p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h2 id="page-title">Dashboard</h2>
                <div class="header-actions">
                    <span class="last-update">√öltima atualiza√ß√£o: <span id="last-update">--:--</span></span>
                    <button id="smtp-toggle" class="icon-btn" onclick="toggleSmtpNotifications()" title="Ativar/Desativar envio de e-mails do SPFBL">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="5" width="18" height="14" rx="2" ry="2"></rect>
                            <polyline points="3 7 12 13 21 7"></polyline>
                        </svg>
                    </button>
                    <button class="icon-btn" onclick="refreshData()" title="Atualizar dados">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"></path>
                        </svg>
                    </button>
                    <button id="theme-toggle" class="icon-btn" onclick="toggleTheme()" title="Alternar tema">
                        <span id="theme-toggle-icon" class="icon-embed" aria-hidden="true"></span>
                    </button>
                </div>
            </header>

            <!-- Dashboard Section (Main Stats) -->
            <section id="section-dashboard" class="content-section active">
                <!-- Charts -->
                <div class="charts-grid">
                    <div class="chart-card large">
                        <h3>An√°lise Detalhada - √öltimas 24 Horas</h3>
                        <canvas id="detailed-stats-chart"></canvas>
                    </div>
                    <div class="chart-card large">
                        <h3 id="spam-hourly-title">Bloqueios Diretos do Servidor - √öltimas 24 Horas</h3>
                        <canvas id="spam-hourly-chart"></canvas>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìß</div>
                        <div class="stat-info">
                            <h3>Consultas Hoje</h3>
                            <p class="stat-value" id="total-queries">--</p>
                            <span class="stat-trend">--</span>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <h3>Aprovados (PASS)</h3>
                            <p class="stat-value" id="passed-queries">--</p>
                            <span class="stat-percentage" id="passed-percent">--%</span>
                        </div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-icon">‚õî</div>
                        <div class="stat-info">
                            <h3>Bloqueados</h3>
                            <p class="stat-value" id="blocked-queries">--</p>
                            <span class="stat-percentage" id="blocked-percent">--%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üñ•Ô∏è</div>
                        <div class="stat-info">
                            <h3>Clientes Ativos</h3>
                            <p class="stat-value" id="active-clients">--</p>
                            <span class="stat-trend">conectados</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíæ</div>
                        <div class="stat-info">
                            <h3>Mem√≥ria do Servidor</h3>
                            <p class="stat-value" id="memory-percent">--</p>
                            <span class="stat-trend" id="memory-used">--</span>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">üîí</div>
                        <div class="stat-info">
                            <h3>Bloqueios Diretos</h3>
                            <p class="stat-value" id="spam-total-direct">0</p>
                            <div style="font-size: 12px; margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(0,0,0,0.1);">
                                <div style="display: flex; justify-content: space-between; margin: 4px 0;">
                                    <span>Host:</span>
                                    <strong id="spam-host-direct">0</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 4px 0;">
                                    <span>Dom√≠nio:</span>
                                    <strong id="spam-domain-direct">0</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin: 4px 0;">
                                    <span>IP:</span>
                                    <strong id="spam-ip-direct">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Queries Section -->
            <section id="section-queries" class="content-section">
                <div class="queries-filters">
                    <input type="text" id="search-queries" placeholder="Buscar por IP, remetente ou destinat√°rio..." class="search-input">
                    <select id="filter-result" class="filter-select">
                        <option value="">Todos os resultados</option>
                        <option value="PASS">PASS</option>
                        <option value="BLOCKED">BLOCKED</option>
                        <option value="SOFTFAIL">SOFTFAIL</option>
                        <option value="FAIL">FAIL</option>
                        <option value="--- SPAM Blocks ---" disabled>--- SPAM Blocks ---</option>
                        <option value="SPAM_HOST_BLOCKED">üö´ Host Bloqueado (SPAM)</option>
                        <option value="SPAM_DOMAIN_BLOCKED">üö´ Dom√≠nio Bloqueado (SPAM)</option>
                        <option value="SPAM_IP_BLOCKED">üö´ IP Bloqueado (SPAM)</option>
                    </select>
                </div>
                <div class="queries-toolbar">
                    <div class="selected-query-panel" id="selected-query-panel">
                        <div class="selected-query-info" id="selected-query-info">
                            <span class="placeholder">Nenhuma consulta selecionada</span>
                        </div>
                        <div class="selected-query-buttons">
                            <div class="selected-button-group">
                                <button
                                    id="action-clear-selection"
                                    class="btn btn-ghost btn-compact"
                                    type="button"
                                    onclick="clearSelectedQuery()"
                                    disabled
                                >
                                    Limpar sele√ß√£o
                                </button>
                                <button
                                    id="action-block-ip"
                                    class="btn btn-danger btn-compact"
                                    type="button"
                                    onclick="handleSelectedAction('block-ip')"
                                    disabled
                                >
                                    Bloquear IP
                                </button>
                                <button
                                    id="action-whitelist-ip"
                                    class="btn btn-success btn-compact"
                                    type="button"
                                    onclick="handleSelectedAction('whitelist-ip')"
                                    disabled
                                >
                                    Whitelist
                                </button>
                                <button
                                    id="action-block-sender"
                                    class="btn btn-outline btn-compact"
                                    type="button"
                                    onclick="handleSelectedAction('block-sender')"
                                    disabled
                                >
                                    Bloquear remetente
                                </button>
                            </div>
                            <div class="selected-button-group global">
                                <button
                                    class="btn btn-success btn-compact"
                                    type="button"
                                    onclick="handleUnblockToken()"
                                    title="Desbloquear IP/Dom√≠nio/Email"
                                >
                                    üîì Desbloquear
                                </button>
                                <button
                                    class="btn btn-danger btn-compact"
                                    type="button"
                                    onclick="handleRemoveFromWhitelist()"
                                    title="Remover da Whitelist"
                                >
                                    ‚ùå Remover da Whitelist
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table" id="queries-table">
                        <thead>
                            <tr>
                                <th>Hor√°rio</th>
                                <th>Resultado</th>
                                <th>IP Origem</th>
                                <th>Remetente</th>
                                <th>Destinat√°rio</th>
                                <th>HELO</th>
                            </tr>
                        </thead>
                        <tbody id="queries-tbody">
                            <tr><td colspan="6" class="loading">Carregando consultas...</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Servers Section -->
            <section id="section-servers" class="content-section">
                <div class="section-header">
                    <h2>Servidores Conectados</h2>
                    <button class="btn btn-primary btn-add-client" onclick="openAddServerModal()">
                        + Adicionar Servidor
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-column">Selecionar</th>
                                <th>Hostname</th>
                                <th>IP/CIDR</th>
                                <th>Tipo</th>
                                <th>Status</th>
                                <th>Informa√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="servers-tbody">
                            <tr><td colspan="6" class="loading">Carregando servidores...</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="servers-actions">
                    <button
                        id="btn-remove-servers"
                        class="btn btn-danger btn-remove-servers"
                        type="button"
                        onclick="handleRemoveServers()"
                        disabled
                    >
                        Remover Servidor
                    </button>
                </div>
            </section>

            <!-- Users Section -->
            <section id="section-users" class="content-section">
                <div class="section-header">
                    <h2>Usu√°rios do Sistema</h2>
                    <button class="btn btn-primary btn-add-client" onclick="openAddUserModal()">
                        + Adicionar Usu√°rio
                    </button>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="select-column"></th>
                                <th>Email</th>
                                <th>Nome</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="users-tbody">
                            <tr><td colspan="5" class="loading">Carregando usu√°rios...</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>


            <!-- Lists Section (Block & White) -->
            <section id="section-lists" class="content-section">
                <!-- Filtros elegantes -->
                <div class="lists-filters">
                    <input type="text" id="blocklist-search" class="search-input" placeholder="Buscar por IP, dom√≠nio, email ou campanha..." autocomplete="off" />
                    <select id="blocklist-type-select" class="filter-select" onchange="setBlocklistTypeFilter(this.value)">
                        <option value="all">Todos os tipos</option>
                        <option value="ip">IPs</option>
                        <option value="domain">Dom√≠nios</option>
                        <option value="pair">Campanhas</option>
                        <option value="email">Emails</option>
                    </select>
                    <select id="lists-view-select" class="filter-select" onchange="setListsView(this.value)">
                        <option value="blocklist">Blacklist (Bloqueados)</option>
                        <option value="whitelist">Whitelist (Permitidos)</option>
                    </select>
                </div>

                <!-- Painel de controle elegante -->
                <div class="lists-toolbar">
                    <div class="lists-control-panel" id="lists-control-panel">
                        <div class="lists-status-info">
                            <div class="lists-status-row">
                                <span class="lists-stats-inline">
                                    <span><strong id="blocklist-total-count">0</strong> bloqueados</span>
                                    <span><strong id="whitelist-total-count">0</strong> permitidos</span>
                                    <span class="lists-selected-count" id="lists-selected-info">Nenhum selecionado</span>
                                </span>
                            </div>
                            <div class="lists-add-inline">
                                <input
                                    type="text"
                                    id="lists-add-input"
                                    class="lists-add-input"
                                    placeholder="IP, dom√≠nio ou email..."
                                    autocomplete="off"
                                    onkeypress="if(event.key==='Enter') addToCurrentList()"
                                />
                                <button class="btn btn-danger btn-compact" type="button" onclick="addToBlocklist()">
                                    Bloquear
                                </button>
                                <button class="btn btn-success btn-compact" type="button" onclick="addToWhitelist()">
                                    Whitelist
                                </button>
                            </div>
                        </div>
                        <div class="lists-control-buttons">
                            <label class="lists-select-all-label">
                                <input type="checkbox" id="lists-select-all" onchange="toggleSelectAllLists()" />
                                Selecionar todos
                            </label>
                            <button class="btn btn-primary btn-compact" type="button" onclick="bulkUnblock()" id="btn-bulk-unblock">
                                Desbloquear
                            </button>
                            <button class="btn btn-success btn-compact" type="button" onclick="bulkUnblockAndWhitelist()" id="btn-bulk-unblock-whitelist">
                                Desbloquear + Whitelist
                            </button>
                            <button class="btn btn-danger btn-compact" type="button" onclick="bulkRemoveWhitelist()" id="btn-bulk-remove-whitelist" style="display:none;">
                                Remover da Whitelist
                            </button>
                            <button class="btn btn-ghost btn-compact" type="button" id="blocklist-search-clear" onclick="clearListsSearch()" disabled>
                                Limpar busca
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tabela da Blacklist -->
                <div class="list-container" id="blocklist-container">
                    <div class="list-header">
                        <div>
                            <h3 id="blocklist-title">Blacklist (Bloqueados)</h3>
                            <span class="list-count" id="blocklist-count">0 itens</span>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th style="width:32px;">#</th>
                                    <th>Token (IP/Dom√≠nio/Email/Campanha)</th>
                                    <th>Tipo</th>
                                    <th style="width:180px;">Data/Hora</th>
                                </tr>
                            </thead>
                            <tbody id="blocklist-tbody">
                                <tr><td colspan="4" class="loading">Carregando blacklist...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="list-footer">
                        <div class="list-pagination">
                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="blocklist-page-prev" onclick="changeListPage('blocklist', -1)" disabled>Anterior</button>
                            <span class="page-info" id="blocklist-page-info">Pagina 1/1</span>
                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="blocklist-page-next" onclick="changeListPage('blocklist', 1)" disabled>Proxima</button>
                        </div>
                        <div class="list-status" id="blocklist-status"></div>
                    </div>
                </div>

                <!-- Tabela da Whitelist (oculta por padr√£o) -->
                <div class="list-container" id="whitelist-container" style="display:none;">
                    <div class="list-header">
                        <div>
                            <h3 id="whitelist-title">Whitelist (Permitidos)</h3>
                            <span class="list-count" id="whitelist-count">0 itens</span>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th style="width:32px;">#</th>
                                    <th>Token (IP/Dom√≠nio/Email)</th>
                                    <th>Tipo</th>
                                </tr>
                            </thead>
                            <tbody id="whitelist-tbody">
                                <tr><td colspan="3" class="loading">Carregando whitelist...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="list-footer">
                        <div class="list-pagination">
                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="whitelist-page-prev" onclick="changeListPage('whitelist', -1)" disabled>Anterior</button>
                            <span class="page-info" id="whitelist-page-info">Pagina 1/1</span>
                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="whitelist-page-next" onclick="changeListPage('whitelist', 1)" disabled>Proxima</button>
                        </div>
                        <div class="list-status" id="whitelist-status"></div>
                    </div>
                </div>
            </section>

            <!-- Addon Section -->
            <section id="section-addon" class="content-section is-hidden">
                <!-- Filtros elegantes igual Consultas -->
                <div class="addon-filters">
                    <input type="text" id="addon-report-search" class="search-input" placeholder="Buscar por dom√≠nio, host ou IP..." autocomplete="off" />
                    <select id="addon-category-select" class="filter-select" onchange="setAddonReportCategoryFromSelect(this.value)">
                        <option value="domains">Dom√≠nios de Alto Risco</option>
                        <option value="hosts">Hosts Suspeitos</option>
                        <option value="ips">IPs Associados</option>
                    </select>
                </div>

                <!-- Painel de controle elegante igual Consultas -->
                <div class="addon-toolbar">
                    <div class="addon-control-panel" id="addon-control-panel">
                        <div class="addon-status-info" id="addon-status-info">
                            <div class="addon-status-row">
                                <span class="addon-status-badge" id="addon-status-badge">Carregando...</span>
                                <span class="addon-status-meta" id="addon-config-summary">--</span>
                            </div>
                            <div class="addon-stats-inline">
                                <span><strong id="addon-domains-count">0</strong> dom√≠nios</span>
                                <span><strong id="addon-hosts-count">0</strong> hosts</span>
                                <span><strong id="addon-ips-count">0</strong> IPs</span>
                                <span class="addon-report-meta" id="addon-report-meta">--</span>
                            </div>
                        </div>
                        <div class="addon-control-buttons">
                            <button class="btn btn-primary btn-compact" type="button" onclick="refreshAddonReport(true)">
                                Atualizar
                            </button>
                            <button class="btn btn-ghost btn-compact" type="button" onclick="resetAddonSimulation()" title="Zerar hist√≥rico de simula√ß√£o do addon">
                                Resetar simula√ß√£o
                            </button>
                            <button class="btn btn-ghost btn-compact" type="button" id="addon-report-search-clear" onclick="clearAddonSearch()" disabled>
                                Limpar busca
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tabela do relat√≥rio -->
                <div class="list-container">
                    <div class="list-header">
                        <div>
                            <h3 id="addon-table-title">Dom√≠nios de Alto Risco</h3>
                            <span class="list-count" id="addon-list-count">0 itens</span>
                        </div>
                    </div>
	                    <div class="table-container">
	                        <table class="data-table" id="addon-report-table">
	                            <thead id="addon-report-thead">
	                                <tr>
	                                    <th>Carregando...</th>
	                                </tr>
	                            </thead>
	                            <tbody id="addon-report-tbody">
	                                <tr><td class="loading">Carregando relat√≥rio do addon...</td></tr>
	                            </tbody>
	                        </table>
	                    </div>
	                    <div class="list-footer">
	                        <div class="list-pagination">
	                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="addon-report-page-prev" onclick="changeListPage('addon-report', -1)" disabled>‚óÄ Anterior</button>
	                            <span class="page-info" id="addon-report-page-info">P√°gina 1/1</span>
	                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="addon-report-page-next" onclick="changeListPage('addon-report', 1)" disabled>Pr√≥xima ‚ñ∂</button>
	                        </div>
	                        <div class="list-status" id="addon-report-status"></div>
	                    </div>
	                </div>
	
	                <div class="list-container">
	                    <div class="list-header">
	                        <div>
                            <h3>Whitelist do Addon</h3>
                            <span class="list-count" id="addon-whitelist-count">0 itens</span>
                        </div>
                        <div class="list-toolbar">
                            <div class="list-search">
                                <input
                                    type="text"
                                    id="addon-whitelist-input"
                                    class="list-search-input"
                                    placeholder="Adicionar dom√≠nio na whitelist"
                                    autocomplete="off"
                                    onkeypress="if(event.key==='Enter') addAddonWhitelistDomain()"
                                />
                                <button class="btn btn-success btn-compact" type="button" onclick="addAddonWhitelistDomain()">
                                    ‚ûï Adicionar
                                </button>
                            </div>
                        </div>
                    </div>
	                    <div class="table-container">
	                        <table class="data-table">
	                            <thead>
	                                <tr>
	                                    <th>Dom√≠nio</th>
	                                    <th style="width:140px;">A√ß√µes</th>
	                                </tr>
	                            </thead>
	                            <tbody id="addon-whitelist-tbody">
	                                <tr><td colspan="2" class="loading">Carregando whitelist...</td></tr>
	                            </tbody>
	                        </table>
	                    </div>
	                    <div class="list-footer">
	                        <div class="list-pagination">
	                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="addon-whitelist-page-prev" onclick="changeListPage('addon-whitelist', -1)" disabled>‚óÄ Anterior</button>
	                            <span class="page-info" id="addon-whitelist-page-info">P√°gina 1/1</span>
	                            <button class="btn btn-ghost btn-compact list-page-btn" type="button" id="addon-whitelist-page-next" onclick="changeListPage('addon-whitelist', 1)" disabled>Pr√≥xima ‚ñ∂</button>
	                        </div>
	                        <div class="list-status" id="addon-whitelist-status"></div>
	                    </div>
	                </div>
	            </section>

            <!-- Logs Section -->
            <section id="section-logs" class="content-section">
                <div class="section-header">
                    <h2>Logs do SPFBL</h2>
                    <button class="btn btn-primary btn-refresh" type="button" onclick="refreshLogs()">
                        üîÑ Atualizar
                    </button>
                </div>

                <div class="logs-grid">
                    <div class="logs-card">
                        <div class="logs-meta">
                            <h3>Atividade de E-mails</h3>
                            <div class="logs-meta-row">
                                <span id="logs-email-file-label" class="logs-file">Arquivo: -</span>
                            </div>
                            <span class="logs-hint">Consultas, bloqueios, resultados SPFBL e SMTP</span>
                        </div>
                        <div class="logs-container">
                            <pre id="logs-email-content" class="logs-content"><span class="loading">Carregando logs de e-mail...</span></pre>
                        </div>
                    </div>

                    <div class="logs-card">
                        <div class="logs-meta">
                            <h3>Atividade de Usu√°rios/Admin</h3>
                            <div class="logs-meta-row">
                                <span id="logs-users-file-label" class="logs-file">Arquivo: -</span>
                            </div>
                            <span class="logs-hint">Cria√ß√£o de usu√°rios, TOTP, comandos ADMIN</span>
                        </div>
                        <div class="logs-container">
                            <pre id="logs-users-content" class="logs-content"><span class="loading">Carregando logs de usu√°rios...</span></pre>
                        </div>
                    </div>
                </div>
            </section>

          </main>
    </div>

    <!-- Modal Adicionar Servidor -->
    <div id="addServerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Adicionar Novo Servidor</h2>
                <span class="close" onclick="closeAddServerModal()">&times;</span>
            </div>
            <form id="addServerForm" onsubmit="handleAddServer(event)">
                <div class="form-group">
                    <label for="client-ip">Endere√ßo IP ou CIDR *</label>
                    <input
                        type="text"
                        id="client-ip"
                        name="ip"
                        required
                        placeholder="192.168.1.100 ou 192.168.1.0/24"
                        pattern="^(\d{1,3}\.){3}\d{1,3}(\/\d{1,2})?$"
                        title="Formato: x.x.x.x ou x.x.x.x/xx"
                    >
                    <small>Exemplo: 192.168.1.100 ou 192.168.1.0/24</small>
                </div>

                <div class="form-group">
                    <label for="client-domain">Dom√≠nio *</label>
                    <input
                        type="text"
                        id="client-domain"
                        name="domain"
                        required
                        placeholder="example.com"
                        pattern="^[a-zA-Z0-9][a-zA-Z0-9-_.]+[a-zA-Z0-9]$"
                        title="Formato v√°lido de dom√≠nio"
                    >
                    <small>Exemplo: mail.example.com</small>
                </div>

                <div class="form-group">
                    <label for="client-option">Tipo de Consulta *</label>
                    <select id="client-option" name="option" required>
                        <option value="SPFBL" selected>SPFBL (Recomendado)</option>
                        <option value="DNSBL">DNSBL</option>
                        <option value="NONE">NONE</option>
                    </select>
                    <small>SPFBL: Verifica√ß√£o completa SPF, DKIM, DMARC</small>
                </div>

                <div class="form-group">
                    <label for="client-email">Email do Administrador</label>
                    <input
                        type="email"
                        id="client-email"
                        name="email"
                        placeholder="admin@example.com"
                    >
                    <small>Opcional: Email para notifica√ß√µes</small>
                </div>

                <div id="modal-error-message" class="error-message" style="display: none;"></div>
                <div id="modal-success-message" class="success-message" style="display: none;"></div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost btn-cancel" onclick="closeAddServerModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary btn-submit" id="btn-submit-server">
                        Adicionar Servidor
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Adicionar Usu√°rio -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Adicionar Novo Usu√°rio</h2>
                <span class="close" onclick="closeAddUserModal()">&times;</span>
            </div>
            <form id="addUserForm" onsubmit="handleAddUser(event)">
                <div class="form-group">
                    <label for="user-email">Email do Usu√°rio *</label>
                    <input
                        type="email"
                        id="user-email"
                        name="email"
                        required
                        placeholder="usuario@domain.com"
                        pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                        title="Formato v√°lido de email"
                    >
                    <small>Este ser√° o login do usu√°rio no painel web</small>
                </div>

                <div class="form-group">
                    <label for="user-name">Nome Completo *</label>
                    <input
                        type="text"
                        id="user-name"
                        name="name"
                        required
                        placeholder="Jo√£o Silva"
                        minlength="3"
                        title="Nome completo do usu√°rio"
                    >
                    <small>Nome de identifica√ß√£o do usu√°rio</small>
                </div>

                <div id="user-modal-error-message" class="error-message" style="display: none;"></div>
                <div id="user-modal-success-message" class="success-message" style="display: none;"></div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost btn-cancel" onclick="closeAddUserModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary btn-submit" id="btn-submit-user">
                        Adicionar Usu√°rio
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
